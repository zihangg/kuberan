PLAN: 013-mobile-optimization
STATUS: IN_PROGRESS
CREATED: 2026-02-12

DESCRIPTION:
Complete mobile optimization of the Kuberan frontend application to ensure excellent UX on mobile devices (375px-768px). Converts desktop-focused tables to mobile-friendly cards, optimizes charts for small screens, improves touch targets, adds collapsible filters, and ensures all components meet mobile accessibility standards.

TARGET BREAKPOINTS:
- iPhone SE: 375px × 667px (primary target)
- iPhone 12-14: 390px × 844px
- iPhone 14 Pro Max: 428px × 926px
- iPad Mini: 768px × 1024px

PHASES:
[X] Phase 1: Foundation & Core Layout (CRITICAL)
[X] Phase 2: Table to Card/List Conversions (HIGH)
[X] Phase 3: Dashboard & Chart Responsiveness (HIGH)
[X] Phase 4: Dialogs & Forms (HIGH)
[X] Phase 5: Detail Pages (MEDIUM)
[X] Phase 6: Remaining Pages (MEDIUM)
[ ] Phase 7: Component Audit (MEDIUM)
[ ] Phase 8: Final Verification & Testing (CRITICAL)

PROGRESS NOTES:
---

2026-02-12 - Phase 1 Complete (PRD 1.1-1.6)
- Added touch-action: manipulation to eliminate 300ms tap delay
- Added overscroll-behavior-y: contain to prevent pull-to-refresh
- Added overflow-x: hidden to prevent horizontal scroll
- Updated button sizes: default h-9→h-10 (40px), sm h-8→h-9 (36px), icon size-9→size-11 (44px), icon-sm size-8→size-9 (36px), icon-lg size-10→size-12 (48px)
- Verified existing responsive patterns: header search (icon-only on mobile), user name (hidden <sm), sidebar drawer (SidebarProvider + SidebarInset)
- Files: globals.css, button.tsx
- Build: ✓ passes

2026-02-12 - Task 2.1 Complete (PRD 2.1)
- Created AccountCard component: displays name, type badge, balance (large), status, currency, created date
- Card clickable (Link wrapper), hover state (bg-accent/50), truncates long names
- Added responsive rendering: md:hidden for mobile cards, hidden md:block for desktop table
- Updated AccountsTableSkeleton: card skeletons on mobile (h-32), table skeleton on desktop
- Pattern established for 2.2 (transactions) and 2.3 (categories)
- Files: apps/web/src/app/(dashboard)/accounts/page.tsx
- Build: ✓ passes

2026-02-12 - Task 2.2 Complete (PRD 2.2)
- Created TransactionListItem: icon (40px circle), description/date/account/category metadata row, amount (color-coded)
- Added Filter icon import from lucide-react
- Implemented collapsible filter state: showFilters toggle, activeFilterCount badge
- Mobile filter panel: toggle button with badge, grid-cols-2 layout, date inputs span col-span-2
- Desktop filters: always visible, lg:grid-cols-5 layout (unchanged)
- Mobile transaction list: divide-y separator, click opens edit dialog
- Pagination: icon-only on mobile (<sm), text visible on sm+
- Updated TransactionsTableSkeleton: list skeletons on mobile (h-20), table skeleton on desktop
- Files: apps/web/src/app/(dashboard)/transactions/page.tsx
- Build: ✓ passes

2026-02-12 - Task 2.3 Complete (PRD 2.3)
- Created CategoryCard: name (with child indentation pl-4), type badge (Income/Expense), color circle, icon, description
- Card shows edit/delete buttons: outline variant, flex-1 layout, full width on mobile
- Responsive rendering: md:hidden for mobile cards grid, hidden md:block for desktop table
- Updated CategoriesTableSkeleton: h-32 card skeletons on mobile, table skeleton on desktop
- Pattern: hover:bg-accent/50, truncate long text, preserve parent/child hierarchy from treeOrder()
- Files: apps/web/src/app/(dashboard)/categories/page.tsx
- Build: ✓ passes

2026-02-12 - Task 3.1 Complete (PRD 3.1)
- Updated dashboard header action buttons to stack on mobile
- Changed container from "flex gap-2" to "flex flex-col sm:flex-row gap-2"
- Buttons stack vertically on <sm (< 640px), horizontal on sm+ (≥ 640px)
- Icon spacing already correct with mr-2 on icons
- Files: apps/web/src/app/(dashboard)/page.tsx
- Build: ✓ passes

2026-02-12 - Task 3.2 Complete (PRD 3.2)
- Made expenditure donut chart responsive for mobile screens
- ChartContainer: max-h-[250px] → max-h-[200px] md:max-h-[250px] (reduced on mobile)
- Center total label: text-base → text-sm md:text-base (smaller on mobile)
- "This Month" label: text-xs → text-[10px] md:text-xs (smaller on mobile)
- Chart now readable on 375px-768px breakpoints
- Files: apps/web/src/components/dashboard/expenditure-chart.tsx
- Build: ✓ passes

2026-02-12 - Task 3.3 Complete (PRD 3.3)
- Made income/expenses bar chart responsive for mobile
- ChartContainer: min-h-[300px] → h-[200px] md:h-[250px] (reduced height, responsive)
- Chart prevents vertical overflow on small screens
- No YAxis present in this chart (not applicable from plan)
- Files: apps/web/src/components/dashboard/income-expenses-chart.tsx
- Build: ✓ passes

2026-02-12 - Task 3.4 Complete (PRD 3.4)
- Made spending trend area chart responsive for mobile
- Added useIsMobile hook import and usage
- ChartContainer: min-h-[200px] → h-[250px] md:h-[300px] (responsive height)
- XAxis: added minTickGap={isMobile ? 50 : 30} to prevent label overlap on mobile
- Wider tick spacing on mobile prevents date labels from overlapping
- Files: apps/web/src/components/dashboard/spending-trend-chart.tsx
- Build: ✓ passes

2026-02-12 - Task 3.5 Complete (PRD 3.5)
- Made net worth area chart responsive for mobile (same pattern as 3.4)
- Added useIsMobile hook import and usage
- ChartContainer: min-h-[300px] → h-[250px] md:h-[300px] (responsive height)
- XAxis: added minTickGap={isMobile ? 50 : 30} to prevent date label overlap
- Ensures chart readable on mobile with proper tick spacing
- Files: apps/web/src/components/dashboard/net-worth-chart.tsx
- Build: ✓ passes

2026-02-12 - Task 3.6 Complete (PRD 3.6) - Verification Only
- Verified dashboard summary cards already responsive (line 116)
- Grid classes: "grid gap-4 sm:grid-cols-2 lg:grid-cols-4"
- Mobile <640px: 1 column, sm ≥640px: 2 columns, lg ≥1024px: 4 columns
- Exactly as required by plan, no changes needed
- Files: apps/web/src/app/(dashboard)/page.tsx (no changes)
- Status: ✓ verified

2026-02-12 - Task 3.7 Complete (PRD 3.7) - Phase 3 Verification
- All Phase 3 tasks complete (3.1-3.6)
- Build: ✓ passes (all prior builds passed)
- Dashboard header buttons: ✓ stack on mobile (flex-col sm:flex-row)
- Expenditure chart: ✓ 200px mobile, 250px desktop, smaller labels
- Income/expenses chart: ✓ 200px mobile, 250px desktop
- Spending trend chart: ✓ 250px mobile, 300px desktop, minTickGap 50
- Net worth chart: ✓ 250px mobile, 300px desktop, minTickGap 50
- Summary cards: ✓ responsive grid (1/2/4 columns)
- Phase 3 complete: All dashboard charts and layouts now mobile-optimized

2026-02-12 - Tasks 4.1 & 4.2 Complete (PRD 4.1, 4.2)
- Made transaction dialog type buttons stack on mobile and increased form spacing
- Type buttons container: "flex gap-2" → "flex flex-col sm:flex-row gap-2" (stack <sm, horizontal ≥sm)
- Form gap: gap-4 → gap-5 (20px spacing for better touch targets)
- Buttons (Expense, Income, Transfer) stack vertically on mobile (<640px)
- Files: apps/web/src/components/transactions/create-transaction-dialog.tsx
- Build: ✓ passes

2026-02-12 - Task 4.3 Complete (PRD 4.3)
- Applied same mobile optimizations to edit transaction dialog
- Type buttons (Expense, Income): "flex gap-2" → "flex flex-col sm:flex-row gap-2"
- Form gap: gap-4 → gap-5 (20px spacing)
- Note: Edit dialog only has 2 type buttons (no Transfer option), pattern identical to create dialog
- Files: apps/web/src/components/transactions/edit-transaction-dialog.tsx
- Build: ✓ passes

2026-02-12 - Task 4.4 Complete (PRD 4.4)
- Optimized account dialogs for mobile
- Create account: Changed all 3 forms (cash, investment, credit-card) from gap-4 → gap-5
- Edit account: Changed form from gap-4 → gap-5
- Note: Account type selector uses Tabs (already responsive), no button stacking needed
- Files: create-account-dialog.tsx, edit-account-dialog.tsx
- Build: ✓ passes

2026-02-12 - Task 4.5 Complete (PRD 4.5)
- Optimized budget dialogs for mobile
- Create budget: Form gap-4 → gap-5
- Edit budget: Form gap-4 → gap-5
- Note: Period selector (Monthly/Yearly) uses Select dropdown, no button stacking needed
- Files: create-budget-dialog.tsx, edit-budget-dialog.tsx
- Build: ✓ passes

2026-02-12 - Task 4.6 Complete (PRD 4.6)
- Optimized category dialogs for mobile
- Create category: Form gap-4 → gap-5
- Edit category: Form gap-4 → gap-5
- Note: Type selector (Income/Expense) uses Select dropdown in create, read-only Badge in edit
- Files: create-category-dialog.tsx, edit-category-dialog.tsx
- Build: ✓ passes

2026-02-12 - Task 4.7 Complete (PRD 4.7)
- Optimized all 5 investment dialogs for mobile
- Changed form gap-4 → gap-5 (20px spacing) in: add-investment-dialog, record-buy-dialog, record-sell-dialog, record-dividend-dialog, record-split-dialog
- No button groups to stack (all use Select dropdowns or single submit buttons)
- CurrencyInput components inherit height from Input (verified in prior tasks)
- Files: 5 investment dialog components
- Build: ✓ passes

2026-02-12 - Task 4.8 Complete (PRD 4.8) - Verification Only
- Verified dialog max-width provides adequate mobile margin
- Line 64 dialog.tsx: max-w-[calc(100%-2rem)] = 32px total margin (16px each side)
- At 375px: dialog = 343px width ✅ adequate
- At 428px: dialog = 396px width ✅ adequate
- Files: dialog.tsx (no changes)
- Status: ✓ verified

2026-02-12 - Task 4.9 Complete (PRD 4.9) - Phase 4 Verification
- All Phase 4 tasks complete (4.1-4.8)
- Build: ✓ passes (pnpm build successful)
- Transaction type buttons: ✓ stack vertically on mobile (<sm)
- All forms: ✓ gap-5 (20px) vertical spacing
- Account/budget/category dialogs: ✓ optimized for mobile
- Investment dialogs: ✓ all 5 dialogs have proper spacing
- Dialog margins: ✓ 16px on each side at all breakpoints
- Phase 4 complete: All dialogs and forms now mobile-optimized

2026-02-12 - Task 5.1 Complete (PRD 5.1)
- Optimized account detail page for mobile
- Header: Stacked vertically on mobile (flex-col sm:flex-row sm:justify-between)
- Header badges: Wrapped to prevent overflow on small screens
- Action buttons: Moved from card header to page header, stack on mobile (flex-col sm:flex-row gap-2)
- Buttons: Edit, Add Transaction (cash accounts), Add Investment (investment accounts)
- Created TransactionListItem component: icon (40px circle), description/date/category, amount (color-coded)
- Transactions: Mobile list (md:hidden, divide-y) + desktop table (hidden md:block)
- Skeletons: h-20 for mobile list, h-12 for desktop table
- Pagination: Icon-only on mobile (<sm), text visible on sm+
- Removed duplicate action buttons from card headers (cleaner layout)
- Files: apps/web/src/app/(dashboard)/accounts/[id]/page.tsx
- Build: ✓ passes
2026-02-12 - Task 5.2 Complete (PRD 5.2)
- Optimized investment detail page for mobile
- Header: Stacked vertically (flex-col sm:flex-row sm:justify-between), badges wrapped separately
- Stats cards: 2-column grid on mobile (grid-cols-2 md:grid-cols-3), changed from sm:grid-cols-2 lg:grid-cols-3
- Action buttons: 2-column grid on mobile (grid-cols-2 md:grid-cols-4 gap-2), replaced flex-wrap
- Created InvestmentTransactionListItem: type badge + date + total, quantity/price grid, fee + realized P&L conditionally shown
- Transaction history: Mobile list (md:hidden, divide-y) + desktop table (hidden md:block)
- Skeletons: h-20 for mobile list, h-12 for desktop table
- Pagination: Icon-only on mobile (<sm), text visible on sm+ (same pattern as account detail)
- Files: apps/web/src/app/(dashboard)/investments/[id]/page.tsx
- Build: ✓ passes

2026-02-12 - Task 5.3 Complete (PRD 5.3)
- Optimized security detail page for mobile
- Header: Stacked vertically on mobile (flex-col sm:flex-row), badge self-start to align left
- Info cards grid: Changed to grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 with gap-3 (was sm:grid-cols-2)
- Price history header: Stacked on mobile (flex-col sm:flex-row sm:justify-between)
- Period tabs: Full width on mobile (w-full sm:w-auto), equal width triggers (flex-1 sm:flex-initial)
- Pagination: Icon-only on mobile (<sm), text visible on sm+ (same pattern as account/investment detail)
- Skeleton: Updated grid to match (grid-cols-1 sm:grid-cols-2)
- Note: No price chart present (just table), no related investments list (skipped per plan notes)
- Files: apps/web/src/app/(dashboard)/securities/[id]/page.tsx
- Build: ✓ passes

2026-02-12 - Task 5.4 Complete (PRD 5.4) - Phase 5 Verification
- All Phase 5 tasks complete (5.1-5.3)
- Build: ✓ passes (pnpm build successful)
- Account detail: ✓ header stacks, action buttons stack, mobile transaction list
- Investment detail: ✓ stats in 2-col grid, action buttons in 2-col grid, mobile list
- Security detail: ✓ header stacks, info cards single column on mobile, tabs full-width
- Pagination: ✓ icon-only on mobile across all detail pages
- Phase 5 complete: All detail pages now mobile-optimized

2026-02-12 - Task 6.1 Complete (PRD 6.1)
- Optimized budgets page filters for mobile
- Filter controls: Stacked on mobile (flex-col sm:flex-row, items-start sm:items-center, gap-3 sm:gap-4)
- Period select: Full width on mobile (w-full sm:w-[140px])
- Card action buttons: Removed h-8 w-8 override, now use size="icon" (44px minimum from Phase 1)
- Edit/Delete buttons now meet 44px touch target minimum
- Files: apps/web/src/app/(dashboard)/budgets/page.tsx
- Build: ✓ passes

2026-02-12 - Task 6.2 Complete (PRD 6.2)
- Optimized investments page for mobile
- Asset allocation chart: max-h-[200px] md:max-h-[250px], center label text-sm md:text-base
- Net worth chart: h-[250px] md:h-[300px], period tabs full-width on mobile (w-full sm:w-auto)
- Holdings by asset type: Mobile cards (md:hidden) + desktop table (hidden md:block)
- Created HoldingCard component: symbol/name, market value, qty/price grid, unrealized/realized G/L, account link
- All holdings table: Mobile cards + desktop sortable table, card/table skeletons
- Pagination: Icon-only on mobile (<sm), text visible on sm+
- Files: apps/web/src/app/(dashboard)/investments/page.tsx, apps/web/src/components/investments/asset-allocation-chart.tsx
- Build: ✓ passes

2026-02-12 - Task 6.3 Complete (PRD 6.3)
- Optimized securities page for mobile
- Created SecurityCard component: symbol (font-mono), name, type badge (secondary), currency + exchange (if available)
- Mobile card grid: md:hidden grid gap-3
- Desktop table: hidden md:block (unchanged from existing)
- Updated SecuritiesTableSkeleton: h-32 card skeletons on mobile (md:hidden), table skeleton on desktop (hidden md:block)
- Pagination: Icon-only on mobile (<sm), text visible on sm+
- Note: No price display in list view (Security model has no current_price, prices from separate API)
- Files: apps/web/src/app/(dashboard)/securities/page.tsx
- Build: ✓ passes

2026-02-12 - Task 6.4 Complete (PRD 6.4) - Phase 6 Verification
- All Phase 6 tasks complete (6.1-6.3)
- Build: ✓ passes (pnpm build successful)
- Budgets page: ✓ filters stack, period select full-width mobile, action buttons 44px
- Investments page: ✓ charts reduced height, holdings show as cards on mobile
- Securities page: ✓ securities show as cards on mobile, pagination icon-only
- Phase 6 complete: All remaining pages now mobile-optimized

2026-02-12 - Task 7.1 Complete (PRD 7.1)
- Fixed input component height for proper touch targets
- Changed h-9 (36px) → h-10 (40px) to meet 40px minimum
- Ensures all text inputs are easily tappable on mobile devices
- Files: apps/web/src/components/ui/input.tsx
- Build: ✓ passes

2026-02-12 - Task 7.2 Complete (PRD 7.2)
- Fixed select component height for proper touch targets
- Default size: h-9 (36px) → h-10 (40px) to meet minimum
- Small size: h-8 (32px) → h-9 (36px) acceptable for secondary controls
- Ensures all select dropdowns are easily tappable on mobile
- Files: apps/web/src/components/ui/select.tsx
- Build: ✓ passes

2026-02-12 - Task 7.3 Complete (PRD 7.3)
- Increased textarea minimum height for better mobile usability
- Changed min-h-[60px] → min-h-[80px] for adequate tap area
- Provides more comfortable multiline text input on touch devices
- Files: apps/web/src/components/ui/textarea.tsx
- Build: ✓ passes
