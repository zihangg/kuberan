# =============================================================================
# Kuberan Production Environment
# =============================================================================
# Copy this file to .env.prod and fill in all values.
# NEVER commit .env.prod to version control.
# =============================================================================

# -- Cloudflare Tunnel -------------------------------------------------------
# Create a tunnel: Cloudflare Dashboard > Zero Trust > Networks > Tunnels
# Copy the tunnel token after creating it.
CF_TUNNEL_TOKEN=

# -- API Configuration -------------------------------------------------------
ENV=production
PORT=8080

# Generate with: openssl rand -hex 32
JWT_SECRET=
JWT_EXPIRES_IN=15m

# Generate with: openssl rand -hex 32
# Must match the oracle's PIPELINE_API_KEY
PIPELINE_API_KEY=

# Restrict CORS to your domain in production
CORS_ORIGIN=https://kuberan.example.com

# -- Database ----------------------------------------------------------------
# Choose ONE of the options below and comment out the other.
# See docs/database-setup.md for full setup instructions.

# OPTION A: Self-hosted PostgreSQL (recommended for full self-hosting)
# Runs a local Postgres 16 container managed by Docker Compose.
# Set COMPOSE_PROFILES=postgres to activate the postgres service.
# COMPOSE_PROFILES=postgres
# DB_HOST=postgres
# DB_PORT=5432
# DB_USER=kuberan
# DB_PASSWORD=        # Generate: openssl rand -hex 32
# DB_NAME=kuberan
# DB_SSLMODE=disable

# OPTION B: Supabase (managed database)
# Connection pooling via Supavisor (transaction mode, port 6543).
# The deploy script automatically overrides to port 5432 (direct) for migrations,
# since golang-migrate requires advisory locks not supported by Supavisor.
# Find these in: Supabase Dashboard > Settings > Database
COMPOSE_PROFILES=
DB_HOST=db.xxxxxxxxxxxx.supabase.co
DB_PORT=6543
DB_USER=postgres.xxxxxxxxxxxx
DB_PASSWORD=
DB_NAME=postgres
DB_SSLMODE=require

# -- Frontend ----------------------------------------------------------------
# Inlined at build time by Next.js. Must match your domain.
NEXT_PUBLIC_API_URL=https://kuberan.example.com

# -- Telegram Bot ------------------------------------------------------------
# Get your bot token from @BotFather on Telegram.
TELEGRAM_BOT_TOKEN=

# Generate with: openssl rand -hex 32
# Must match BOT_INTERNAL_SECRET in the bot service.
BOT_INTERNAL_SECRET=
